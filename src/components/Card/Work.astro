---
import { colourText } from '@/utils/maps';
// import LinkArrow from '@/components/Elements/LinkArrow.astro';

interface Props {
  title: string;
  headline: string;
  description: string;
  cta: string;
  color?: ColorTypes;
  theme?: ThemeTypes;
  class?: string;
}

const hasSlotDefault = !!Astro.slots.default;
const {
  title,
  headline,
  description,
  cta,
  color = 'current',
  theme = 'dark',
  class: className,
  ...rest
} = Astro.props as Props;

const colorTitle = colourText[color as keyof typeof colourText] ?? '';
const classes = [
  'card-work',
  `theme-${theme}`,
  theme === 'light' ? 'text-navy' : '',
  className,
];

const colourHoverMap: Record<string, string> = {
  yellow: 'before:text-yellow',
  green: 'before:text-green',
  blue: 'before:text-blue',
  purple: 'before:text-purple',
} as const;
---

<div data-js="card-work" class:list={classes} {...rest}>
  <div
    class="transform-style-3d backface-hidden rotate-x-0 rotate-y-0 will-change-transform rounded-30 lg:rounded-40 w-full h-full overflow-hidden text-left transition-transform duration-300 ease-out"
  >
    <a
      href="/"
      class:list={[
        'card-work__link group rounded-[inherit] block w-full h-full p-1 bg-white/10',
        theme === 'light' ? 'bg-navy/15' : 'bg-white/15',
        colourHoverMap[color],
      ]}
    >
      <div
        class:list={[
          'card-work__inner rounded-[inherit] relative z-10 w-full h-full overflow-hidden',
          theme === 'light' ? 'bg-white' : 'bg-card',
          colourHoverMap[color],
        ]}
      >
        <div
          class="card-work__content rounded-[inherit] relative z-20 w-full h-full p-30 lg:p-60 grid grid-cols-1 gap-y-30 lg:grid-cols-2"
        >
          <div class="md:gap-30 flex flex-col items-start justify-start gap-20">
            <div
              class="gap-30 md:gap-40 flex flex-col items-start justify-start"
            >
              <p
                class:list={[
                  theme === 'dark' && colorTitle,
                  'font-heading font-bold text-15 lg:text-18 text-balance',
                ]}
              >
                {title}
              </p>

              <h3 class="font-heading text-fluid-h4 text-balance font-semibold">
                {headline}
              </h3>
            </div>

            <p
              class="font-normal text-15 lg:text-18 opacity-70 text-pretty max-w-[36ch]"
            >
              {description}
            </p>
          </div>

          {
            hasSlotDefault && (
              <div>
                <div class="shadow-media w-full">
                  <slot />
                </div>
              </div>
            )
          }
        </div>
      </div>
    </a>
  </div>
</div>

<style is:global>
  .card-work__content {
    box-shadow:
      0px 0px 100px theme('colors.navy') inset,
      20px 20px 50px theme('colors.card') inset;

    .card-work.theme-light & {
      box-shadow: none;
    }
  }

  .card-work__link,
  .card-work__inner {
    &::before {
      opacity: 0;
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      z-index: 1;
      translate: var(--x) var(--y) 0;
      width: 150%;
      aspect-ratio: 1;
      pointer-events: none;
      transition: opacity 0.3s ease;
      background-image: radial-gradient(currentColor, transparent, transparent);

      .card-work.theme-light & {
        color: theme('colors.navy-lightest');
      }
    }
  }

  .card-work__link {
    &:hover {
      &::before {
        opacity: 1;
      }

      .card-work__inner {
        &::before {
          opacity: 0.2;
        }
      }
    }
  }
</style>
